@model List<PorSaludApp.Models.Cliente>

@{
    ViewBag.Title = "Lista de Clientes";
    int currentPage = ViewBag.CurrentPage ?? 1;
    int totalPages = ViewBag.TotalPages ?? 1;
    int totalRecords = ViewBag.TotalRecords ?? 0;
}

<div class="container mt-4">
    <h2 class="text-center mb-4">📋 Lista de Clientes</h2>

    @if (ViewBag.Error != null)
    {
        <div class="alert alert-danger">@ViewBag.Error</div>
    }

    <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Identidad</th>
                    <th>Nombre Completo</th>
                    <th>Teléfono</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Any())
                {
                    foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.ClienteId</td>
                            <td>@item.Identidad</td>
                            <td>@item.NombreCompleto</td>
                            <td>@item.Telefono</td>
                            <td>
                                <span class="badge @(item.Estado ? "bg-success" : "bg-danger")">
                                    @(item.Estado ? "Activo" : "Inactivo")
                                </span>
                            </td>
                            <td>
                                <div class="btn-group btn-group-sm">
                                    @Html.ActionLink("✏️ Editar", "Edit", new { id = item.ClienteId },
                                        new { @class = "btn btn-warning" })
                                    @Html.ActionLink("📄 Documentos", "Index", "Documentos",
                                        new { clienteId = item.ClienteId }, new { @class = "btn btn-info" })
                                </div>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="6" class="text-center text-muted py-4">
                            No se encontraron clientes registrados
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Paginación Bootstrap -->
    @if (totalPages > 1)
    {
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <li class="page-item @(currentPage == 1 ? "disabled" : "")">
                    <a class="page-link" href="@Url.Action("Index", new { page = currentPage - 1 })">« Anterior</a>
                </li>

                @for (int i = 1; i <= totalPages; i++)
                {
                    <li class="page-item @(i == currentPage ? "active" : "")">
                        <a class="page-link" href="@Url.Action("Index", new { page = i })">@i</a>
                    </li>
                }

                <li class="page-item @(currentPage == totalPages ? "disabled" : "")">
                    <a class="page-link" href="@Url.Action("Index", new { page = currentPage + 1 })">Siguiente »</a>
                </li>
            </ul>
        </nav>
    }

    <!-- Información de paginación -->
    <div class="text-center mt-3">
        <p class="text-muted">
            Página @currentPage de @totalPages -
            Mostrando @Math.Min(Model.Count, 10) de @totalRecords registros
        </p>
    </div>

    <!-- Botón Crear Nuevo Cliente - VENTANA 2 -->
    <div class="text-center mt-4">
        @Html.ActionLink("➕ Crear Nuevo Cliente", "Create", null,
            new { @class = "btn btn-success btn-lg" })
    </div>
</div>